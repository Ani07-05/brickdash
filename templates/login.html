<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - BrickDash</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <i class="fas fa-cubes"></i>
                <h1>Welcome Back</h1>
                <p>Sign in to BrickDash</p>
            </div>

            <!-- Flash Messages as Alerts -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}" style="margin-bottom: 24px;">
                            <i class="fas fa-{% if category == 'success' %}check-circle{% elif category == 'danger' %}exclamation-circle{% else %}info-circle{% endif %}"></i>
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <form method="POST" action="{{ url_for('login') }}">
                <div class="form-group">
                    <label>Select Role</label>
                    <div style="display: flex; gap: 12px; margin-bottom: 8px;">
                        <label class="role-card selected" onclick="selectRole(this)" style="flex: 1; text-align: center; padding: 16px 12px; border: 2px solid var(--primary-subtle); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; background: var(--primary-subtle);">
                            <input type="radio" name="role" value="Manager" checked style="display: none;">
                            <i class="fas fa-user-tie" style="font-size: 1.8rem; color: var(--primary); display: block; margin-bottom: 8px;"></i>
                            <span style="font-size: 0.85rem; font-weight: 600; color: var(--text-primary); display: block;">Manager</span>
                        </label>
                        <label class="role-card" onclick="selectRole(this)" style="flex: 1; text-align: center; padding: 16px 12px; border: 2px solid var(--border-medium); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; background: var(--bg-white);">
                            <input type="radio" name="role" value="Supervisor" style="display: none;">
                            <i class="fas fa-hard-hat" style="font-size: 1.8rem; color: var(--warning); display: block; margin-bottom: 8px;"></i>
                            <span style="font-size: 0.85rem; font-weight: 600; color: var(--text-primary); display: block;">Supervisor</span>
                        </label>
                        <label class="role-card" onclick="selectRole(this)" style="flex: 1; text-align: center; padding: 16px 12px; border: 2px solid var(--border-medium); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; background: var(--bg-white);">
                            <input type="radio" name="role" value="Employee" style="display: none;">
                            <i class="fas fa-user" style="font-size: 1.8rem; color: var(--success); display: block; margin-bottom: 8px;"></i>
                            <span style="font-size: 0.85rem; font-weight: 600; color: var(--text-primary); display: block;">Employee</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Username</label>
                    <input type="text" name="username" class="form-control" placeholder="Enter your username" required autofocus>
                </div>

                <div class="form-group">
                    <label>Password</label>
                    <input type="password" name="password" class="form-control" placeholder="Enter your password" required>
                </div>

                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Sign In
                </button>
            </form>

            <div style="margin-top: 28px; padding: 20px; background: var(--bg-secondary); border-radius: var(--radius-md); border: 1px solid var(--border-light);">
                <h4 style="color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px; text-align: center; font-weight: 600;">Demo Credentials</h4>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--bg-white); border-radius: var(--radius-sm); border: 1px solid var(--border-light);">
                        <span style="font-weight: 600; color: var(--text-primary); font-size: 0.87rem;">Manager</span>
                        <span style="color: var(--text-secondary); font-family: 'Courier New', monospace; font-size: 0.85rem;">admin / admin123</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--bg-white); border-radius: var(--radius-sm); border: 1px solid var(--border-light);">
                        <span style="font-weight: 600; color: var(--text-primary); font-size: 0.87rem;">Supervisor</span>
                        <span style="color: var(--text-secondary); font-family: 'Courier New', monospace; font-size: 0.85rem;">supervisor / super123</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--bg-white); border-radius: var(--radius-sm); border: 1px solid var(--border-light);">
                        <span style="font-weight: 600; color: var(--text-primary); font-size: 0.87rem;">Employee</span>
                        <span style="color: var(--text-secondary); font-family: 'Courier New', monospace; font-size: 0.85rem;">employee / emp123</span>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 24px; color: var(--text-secondary); font-size: 0.9rem;">
                New employee? <a href="{{ url_for('register') }}" style="color: var(--primary); text-decoration: none; font-weight: 600;">Create an account</a>
            </div>
        </div>
    </div>

    <script>
        function selectRole(el) {
            // Remove selected from all
            document.querySelectorAll('.role-card').forEach(card => {
                card.classList.remove('selected');
                card.style.border = '2px solid var(--border-medium)';
                card.style.background = 'var(--bg-white)';
            });

            // Add selected to clicked
            el.classList.add('selected');
            el.style.border = '2px solid var(--primary-subtle)';
            el.style.background = 'var(--primary-subtle)';
            el.querySelector('input').checked = true;
        }
    </script>
</body>
</html>
